<!doctype html>
<meta charset=utf-8>
<script src="/resources/testharness.js"></script>
<script src="/resources/testharnessreport.js"></script>
<title>window.open(), entry removed, incumbent ok, current ok, and relevant ok</title>
<iframe src="support/entry.html"></iframe>
<iframe src="support/incumbent.html"></iframe>
<iframe src="support/current.html"></iframe>
<iframe src="support/relevant.html"></iframe>
<iframe name=uniqueish-target></iframe>
<script>
  onload = function() {
    var entry = self[0]
        incumbent = self[1],
        current = self[2],
        relevant = self[3],
        toDo = entry.postMessage.bind(entry)
    entry.onmessage = function() { incumbent.helper(current.open.bind(relevant)) }
    entry.frameElement.parentNode.removeChild(entry.frameElement)
    toDo("", "*")
  }
</script>
